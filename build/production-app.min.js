function addCss(a){try{var b=document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",c.innerHTML=a,b.appendChild(c)}catch(d){return}}window.Exyht=Ember.Application.create({currentPath:"",BaseURL:"/blog/",gravatarVersion:"identicon"}),Exyht.deferReadiness();var hostnameWithProtocolPort=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");Exyht.currentBaseUri=hostnameWithProtocolPort+Exyht.BaseURL;var currentDate=new Date;Exyht.currentYear=currentDate.getFullYear(),$.ajaxSetup({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")}}),function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/en_US/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk"),Ember.Handlebars.helper("format-markdown",function(a){function b(a){return/^https?:\/\//.test(a)?a:void 0}if("undefined"!=typeof a){var c=new Markdown.getSanitizingConverter;emoji.sheet_path=hostnameWithProtocolPort+"/blog/libraries/js/sheet_twitter_72.png",emoji.use_sheet=!0,emoji.include_title=!0,emoji.init_env();var d=c.makeHtml(a);return new Ember.Handlebars.SafeString(emoji.replace_colons(html_sanitize(d,b)))}}),Ember.Handlebars.helper("format-xmarkdown",function(a){if("undefined"!=typeof a){var b=new Markdown.getSanitizingConverter;return new Ember.Handlebars.SafeString(emoji.replace_colons(b.makeHtml(a)))}}),Ember.Handlebars.helper("format-archive-date",function(a){return moment(a).format("DD MMM YYYY")}),Ember.Handlebars.helper("format-comment-number",function(a){return 1==a?" Comment":" Comments"}),Exyht.ResetScroll=Ember.Mixin.create({activate:function(){this._super(),window.scrollTo(0,0)}}),Exyht.Router.map(function(){this.route("index",{path:Exyht.BaseURL}),this.route("post",{path:Exyht.BaseURL+"post/:post_slug/:post_id"}),this.route("archive",{path:Exyht.BaseURL+"archive"})}),Exyht.Router.reopen({location:"history"}),Exyht.IndexRoute=Ember.Route.extend(Exyht.ResetScroll,{init_post_offset:0,init_post_limit:8,model:function(){return Ember.$.getJSON(Exyht.currentBaseUri+"getBlogPosts/"+this.init_post_offset+"/"+this.init_post_limit).then(function(a){return{posts:a}})},redirect:function(){this.transitionTo("index")}}),Exyht.PostRoute=Ember.Route.extend(Exyht.ResetScroll,{model:function(a){return Ember.$.getJSON(Exyht.currentBaseUri+"getPostTitle/"+a.post_id).then(function(a){return $("title").html(a.title),a})},setupController:function(a,b){Ember.$.getJSON(Exyht.currentBaseUri+"postComments/"+b.id).then(function(b){Ember.run(function(){a.set("model",b)}),$("title").html(b.title)})},serialize:function(a){var b=a.title.substring(0,60).replace(/[^A-Za-z0-9\s+]/g,"").replace(/\s+/g,"-").toLowerCase();return{post_slug:b,post_id:a.id}}}),Exyht.ArchiveRoute=Ember.Route.extend(Exyht.ResetScroll,{model:function(){return Ember.$.getJSON(Exyht.currentBaseUri+"getAllTitles").then(function(a){return{archive:a}})}}),Exyht.AddCommentComponent=Ember.Component.extend({tagName:"span",getAPI:function(){console.log("Welcome!  Fetching your information.... ");var a=this;this.set("is_loggedin",!0),FB.api("/me",function(b){b&&!b.error&&(console.log("Successful login for: "+b.name),a.setProperties({user_name:b.name,user_email:b.email}))})},fbLogin:function(){var a=this;FB.login(function(b){"connected"===b.status?a.getAPI():document.getElementById("status").innerHTML="not_authorized"===b.status?"Please log into this app.":"Please log into Facebook."},{scope:"public_profile,email"})},setPropForAddCmt:function(){var a=this.get("postId"),b=this.get("comments"),c=!0,d=!1;if(this.setProperties({isCommentDivShown:c,isHideAddComment:d,commentsArray:b,actualPostId:a}),this.get("notReply")===!0){var e=this.get("title"),f=this.get("title").substring(0,60).replace(/[^A-Za-z0-9\s+]/g,"").replace(/\s+/g,"-").toLowerCase();this.setProperties({actualTitle:e,currentSlug:f,isReplying:!1,commentIdToReply:"",commenterNameToReply:"",commenterGravaterToReply:""})}if(this.get("isReply")===!0){var g=this.get("cmtId"),h=this.get("cmtName"),i=this.get("cmtEmail");this.setProperties({actualTitle:"",currentSlug:"",isReplying:!0,commentIdToReply:g,commenterNameToReply:h,commenterGravaterToReply:i})}},addCmt:function(){var a=this.get("user_name").trim(),b=this.get("typeComment"),c=this.get("actualPostId"),d=this.get("user_email").trim(),e=this.get("commentIdToReply"),f=this.get("valueForSpam");if(!b||b.length<20||!a||!d)return this.set("isCommentDivShown",!0),!1;if(b.trim()){this.set("sendingCommentOn",!0);var g=this;$.post(Exyht.BaseURL+"addComment",{postId:c,comment:b,name:a,email:d,spam_bot:f,replyToCommentId:e},function(c){if($('meta[name="csrf-token"]').remove(),$("head").append('<meta name="csrf-token" content="'+c.token+'">'),$.ajaxSetup({headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")}}),g.set("sendingCommentOn",!1),"saved"==c.controller_response){g.set("isCommentDivShown",!1);var d=CryptoJS.MD5(g.get("user_email").trim().toLowerCase()),e=g.get("commenterNameToReply"),f=g.get("commenterGravaterToReply");g.get("commentsArray").pushObject(g.get("isReplying")===!0?{name:a,email:d,comment:b,replyToComment:Ember.Object.create({commentHasReply:!0,name:e,email:f})}:{name:a,email:d,comment:b,replyToComment:[]}),g.setProperties({typeComment:"",actualPostId:"",actualTitle:"",currentSlug:"",isReplying:!1,commentIdToReply:"",commenterNameToReply:"",commenterGravaterToReply:""}),window.scrollTo(0,document.body.scrollHeight)}else 1===c.read_only_mode?($("#showError").addClass("alert alert-danger"),$("#showError").html(c.controller_response)):($("#showError").addClass("alert alert-danger"),$("#showError").html(c.error_msg))},"json")}},actions:{addCmtAction:function(){Ember.run.debounce(this,this.setPropForAddCmt,500)},sendCmt:function(){console.log("yes!"),Ember.run.debounce(this,this.addCmt,1e3)},fbLoginAttempt:function(){Ember.run.debounce(this,this.fbLogin,500)}}}),Exyht.EditorToolsComponent=Ember.Component.extend({actions:{ctv:function(a){var b=$("textarea");b.val(b.val()+a)},citv:function(a,b){var c=$("textarea");c.val(""===c.val()?c.val()+a:c.val()+b)},insertBold:function(){this.send("ctv"," **bold** ")},insertItalic:function(){this.send("ctv"," *italic* ")},insertLink:function(){this.send("citv","[Link description](http://example.com)","\n [Link description](http://example.com)")},insertQuote:function(){this.send("ctv","\n > your quote here")},insertCode:function(){this.send("citv","`For inline code` \n\n	For pre code","\n\n`For inline code` \n\n	For pre code")},insertOrderedlist:function(){this.send("ctv","Indent one space after the dot '.'\n\n1. Ordered list1\n2. Ordered list2")},insertUnorderedlist:function(){this.send("ctv","Indent one space after the + or -.\n\n- Unordered list1\n	+ Nested list")},insertHorizontalrule:function(){this.send("citv","-----\nNew line","\n\n-----\nNew line")},insertStrikethrough:function(){this.send("ctv","<del>Strike through</del>")},insertSubscript:function(){this.send("ctv","Sub<sub>script</sub>")},insertSuperscript:function(){this.send("ctv","Sub<sup>script</sup>")},insertHeading1:function(){this.send("citv","# Heading1\n","\n# Heading1\n")},insertHeading2:function(){this.send("citv","# Heading2\n","\n# Heading2\n")},insertHeading3:function(){this.send("citv","# Heading3\n","\n# Heading3\n")}}}),Exyht.FlagCommentComponent=Ember.Component.extend({tagName:"span",flagCmt:function(){var a=this.get("id"),b=this;$.ajax({type:"POST",url:Exyht.BaseURL+"flagComment",data:{commentId:a},success:function(){b.set("isFlagged",!0)}})},actions:{flagComment:function(){Ember.run.debounce(this,this.flagCmt,500)}}}),Exyht.GravatarImageComponent=Ember.Component.extend({size:40,email:"",notReply:!0,gravatarUrl:function(){var a=this.get("email"),b=this.get("size");return"http://www.gravatar.com/avatar/"+a+"?d="+Exyht.gravatarVersion+"&s="+b}.property("email","size")}),Exyht.InfiniteScrollComponent=Ember.Component.extend({more_post_offset:8,more_post_limit:8,loadingMoreTopics:!1,new_limit:function(){return this.get("more_post_limit")}.property("more_post_limit"),inInsert:function(){$(window).on("scroll",$.proxy(this.didScroll,this))}.on("didInsertElement"),onLeaving:function(){this.setProperties({more_post_offset:8,more_post_limit:8,new_limit:8}),$(window).off("scroll",$.proxy(this.didScroll,this))}.on("willDestroyElement"),didScroll:function(){$(window).scrollTop()+$(window).height()==$(document).height()&&(this.set("loadingMoreTopics",!0),setTimeout(function(){Ember.run.debounce(this,this.loadTopics,1e3)}.bind(this),500))},loadTopics:function(){var a=this.get("posts"),b=this;return $.getJSON(Exyht.currentBaseUri+"getBlogPosts/"+this.get("more_post_offset")+"/"+this.get("more_post_limit")).then(function(c){b.set("loadingMoreTopics",!1),$.each(c,function(d){c[d].no_post===!1&&(a.pushObject({id:c[d].id,title:c[d].title,body:c[d].body,created:c[d].created,no_post:c[d].no_post}),b.set("more_post_offset",b.incrementProperty("new_limit")))})})}}),Exyht.ManageEditorComponent=Ember.Component.extend({tagName:"span",cancelAddComment:function(){var a=this.get("typeComment");if($("div.container-full").css({"margin-top":"0"}),"undefined"==typeof a||0===a.length)this.setProperties({isCommentDivShown:!1,actualPostIdForAddComment:"",actualTitleForAddComment:"",actualOnlyCurrentSlug:"",isReplying:!1,currentCommentIdToReply:"",currentCommenterNameToReply:"",currentCommenterGravaterToReply:""});else{var b=confirm("Want to cancel?");b===!0&&this.setProperties({typeComment:"",isCommentDivShown:!1,actualPostIdForAddComment:"",actualTitleForAddComment:"",actualOnlyCurrentSlug:"",isReplying:!1,currentCommentIdToReply:"",currentCommenterNameToReply:"",currentCommenterGravaterToReply:""})}},hideAddComment:function(){var a=this.get("typeComment");"undefined"==typeof a||0===a.length?(this.setProperties({isHideAddComment:!1,isCommentDivShown:!1,sendingCommentOn:!1,actualPostId:"",actualTitle:"",currentSlug:"",isReplying:!1,commentIdToReply:"",commenterNameToReply:"",commenterGravaterToReply:""}),$("div.container-full").css({"margin-top":"0"})):(this.setProperties({isCommentDivShown:!1,isHideAddComment:!0}),$("div.container-full").css({"margin-top":"50px"}))},showAddComment:function(){this.setProperties({isCommentDivShown:!0,isHideAddComment:!1}),$("div.container-full").css({"margin-top":"0"})},actions:{cancelCmt:function(){Ember.run.debounce(this,this.cancelAddComment,500)},hideCmtBox:function(){Ember.run.debounce(this,this.hideAddComment,500)},showCmtBox:function(){Ember.run.debounce(this,this.showAddComment,500)}}}),Exyht.AutoExpandingTextAreaComponent=Ember.TextArea.extend({didInsertElement:function(){Ember.run.next(function(){function a(a){var c;c=a.match(/`{3,}/g),c&&c.length%2?b=!0:(c=a.match(/`/g),b=c&&c.length%2?!0:!1)}var b=!1;this.$().focus(),this.$().textcomplete([{match:/\B:([\-+\w]*)$/,search:function(a,b){b($.map(emojies,function(b){return 0===b.indexOf(a)?b:null}))},template:function(a){return new Ember.Handlebars.SafeString(emoji.replace_colons(":"+a.toLowerCase()+":")+" :"+a+":")},replace:function(a){return":"+a+": "},index:1,context:function(c){return a(c),!b}},{match:/\b(\w{2,})$/,search:function(a,b){b($.map(words,function(b){return 0===b.indexOf(a)?b:null}))},index:1,replace:function(a){return a+" "},context:function(){return b}}]),this.$().scroll(function(){var a=$(this).scrollTop();0===a?a=a:a+=5,$("div#typingCommentDiv").stop().animate({scrollTop:a},500)})}.bind(this))}}),Exyht.TimeAgoComponent=Ember.Component.extend({timeAgo:"",clock:function(){timezone=jstz.determine(),timezoneName=timezone.name();var a=moment.tz(this.get("createdAt"),timezoneName).fromNow();this.set("timeAgo",a),Ember.run.later(this,this.clock,6e4)}.on("didInsertElement")}),Exyht.ApplicationController=Ember.ArrayController.extend({needs:"post",is_loggedin:!1,user_name:"",user_email:"",isReplying:!1,isHideAddComment:!1,isCommentDivShown:!1,sendingCommentOn:!1,actualTitle:"",actualPostId:"",currentSlug:"",commentsArray:"",newCommentLength:"",showNewCommentLength:!1,commentIdToReply:"",commenterNameToReply:"",commenterGravaterToReply:"",valueForSpam:"",postKey:function(){var a=this.get("typeComment").length,b=Math.abs(20-a);0===a||20>a?this.set("showNewCommentLength",!0):this.set("showNewCommentLength",!1),this.set("newCommentLength",b)}.observes("typeComment"),hasLogo:function(){return Ember.get("Exyht.BlogSettings.has_logo")}.property("Exyht.BlogSettings.has_logo"),blogLogo:function(){var a=Ember.get("Exyht.BlogSettings.logo");return""!==a?a:""}.property("Exyht.BlogSettings.logo"),blogTitle:function(){return Ember.get("Exyht.BlogSettings.blog_title")}.property("Exyht.BlogSettings.blog_title"),blogSubTitle:function(){return Ember.get("Exyht.BlogSettings.blog_sub_title")}.property("Exyht.BlogSettings.blog_sub_title"),bodyBgColor:function(){var a=Ember.get("Exyht.BlogStyle.body_bg_clr");return""!==a?"background-color: "+a:"background-color: #ffffff"}.property("Exyht.BlogStyle.body_bg_clr"),readOnlyMode:function(){return Ember.get("Exyht.BlogSettings.isReadOnlyMode")}.property("Exyht.BlogSettings.isReadOnlyMode"),commentFeature:function(){return Ember.get("Exyht.BlogSettings.hasCommentFeature")}.property("Exyht.BlogSettings.hasCommentFeature"),hasNavbar:function(){return Ember.get("Exyht.BlogSettings.hasNavbar")}.property("Exyht.BlogSettings.hasNavbar"),blogLinks:function(){return Ember.get("Exyht.BlogLinks")}.property("Exyht.BlogLinks"),navBgColor:function(){var a=Ember.get("Exyht.BlogStyle.nav_bg_clr");return""!==a?"background-color: "+a:"background-color: #428bca"}.property("Exyht.BlogStyle.nav_bg_clr"),currentYear:function(){return Ember.get("Exyht.currentYear")}.property("Exyht.currentYear"),footerBgColor:function(){var a=Ember.get("Exyht.BlogStyle.footer_bg_clr");return""!==a?"background-color: "+a:""}.property("Exyht.BlogStyle.footer_bg_clr"),sidebarBgColor:function(){var a=Ember.get("Exyht.BlogStyle.sidebar_bg_clr");return""!==a?"background-color: "+a:"background-color: #ffffff"}.property("Exyht.BlogStyle.sidebar_bg_clr"),sidebarAuthor:function(){return Ember.get("Exyht.SidebarInfo.sidebar_info.author")}.property("Exyht.SidebarInfo.sidebar_info.author"),sidebarArchive:function(){return Ember.get("Exyht.SidebarInfo.sidebar_info.archive")}.property("Exyht.SidebarInfo.sidebar_info.archive")}),Exyht.CommentsController=Ember.ObjectController.extend({needs:["application","post"],commentFeature:Ember.computed.oneWay("controllers.application.commentFeature"),readOnlyMode:Ember.computed.oneWay("controllers.application.readOnlyMode"),is_loggedin:Ember.computed.alias("controllers.application.is_loggedin"),user_name:Ember.computed.alias("controllers.application.user_name"),user_email:Ember.computed.alias("controllers.application.user_email"),isCommentDivShown:Ember.computed.alias("controllers.application.isCommentDivShown"),isHideAddComment:Ember.computed.alias("controllers.application.isHideAddComment"),isReplying:Ember.computed.alias("controllers.application.isReplying"),actualPostId:Ember.computed.alias("controllers.application.actualPostId"),actualTitle:Ember.computed.alias("controllers.application.actualTitle"),postIdFromPostCtlr:Ember.computed.alias("controllers.post.id"),commentsArray:Ember.computed.alias("controllers.application.commentsArray"),getCommentsArrayFromPostCtlr:Ember.computed.alias("controllers.post.comments"),commentIdToReply:Ember.computed.alias("controllers.application.commentIdToReply"),commenterNameToReply:Ember.computed.alias("controllers.application.commenterNameToReply"),commenterGravaterToReply:Ember.computed.alias("controllers.application.commenterGravaterToReply"),currentSlug:Ember.computed.alias("controllers.application.currentSlug")}),Exyht.IndexController=Ember.ObjectController.extend({postBgColor:function(){var a=Ember.get("Exyht.BlogStyle.post_bg_clr");return""!==a?"background-color: "+a:"background-color: #ffffff"}.property("Exyht.BlogStyle.post_bg_clr")}),Exyht.PostController=Ember.ObjectController.extend({needs:["application","index"],postBgColor:Ember.computed.oneWay("controllers.index.postBgColor"),is_loggedin:Ember.computed.alias("controllers.application.is_loggedin"),user_name:Ember.computed.alias("controllers.application.user_name"),user_email:Ember.computed.alias("controllers.application.user_email"),commentFeature:Ember.computed.oneWay("controllers.application.commentFeature"),readOnlyMode:Ember.computed.oneWay("controllers.application.readOnlyMode"),isCommentDivShown:Ember.computed.alias("controllers.application.isCommentDivShown"),isHideAddComment:Ember.computed.alias("controllers.application.isHideAddComment"),isReplying:Ember.computed.alias("controllers.application.isReplying"),actualTitle:Ember.computed.alias("controllers.application.actualTitle"),actualPostId:Ember.computed.alias("controllers.application.actualPostId"),currentSlug:Ember.computed.alias("controllers.application.currentSlug"),commentsArray:Ember.computed.alias("controllers.application.commentsArray"),commentIdToReply:Ember.computed.alias("controllers.application.commentIdToReply"),commenterNameToReply:Ember.computed.alias("controllers.application.commenterNameToReply"),commenterGravaterToReply:Ember.computed.alias("controllers.application.commenterGravaterToReply"),hasPost:function(){var a,b=this.get("id");return a="undefined"==typeof b||0===b?!1:!0}.property("id")}),Exyht.PostView=Ember.View.extend({templateName:"post",postCreated:function(){return new Ember.Handlebars.SafeString(moment(this.get("controller.created")).format("MMM DD YYYY"))}.property("controller.created"),pageViewCount:function(){var a=parseInt(this.get("controller.views"));return new Ember.Handlebars.SafeString(0===a?"1 seen":a+1+" seen")}.property("controller.views")});