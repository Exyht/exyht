// Markdown sanitizer
!function(){function t(t){return t.replace(/<[^>]*>?/gi,e)}function e(t){return t.match(r)||t.match(o)||t.match(a)?t:""}function s(t){if(""==t)return""
var e=/<\/?\w+[^>]*(\s|$|>)/g,s=t.toLowerCase().match(e),i=(s||[]).length
if(0==i)return t
for(var n,r,o,a="<p><img><br><li><hr>",h=[],c=[],p=!1,l=0;i>l;l++)if(n=s[l].replace(/<\/?(\w+).*/,"$1"),!(h[l]||a.search("<"+n+">")>-1)){if(r=s[l],o=-1,!/^<\//.test(r))for(var u=l+1;i>u;u++)if(!h[u]&&s[u]=="</"+n+">"){o=u
break}-1==o?p=c[l]=!0:h[o]=!0}if(!p)return t
var l=0
return t=t.replace(e,function(t){var e=c[l]?"":t
return l++,e})}var i,n
"object"==typeof exports&&"function"==typeof require?(i=exports,n=require("./Markdown.Converter").Converter):(i=window.Markdown,n=i.Converter),i.getSanitizingConverter=function(){var e=new n
return e.hooks.chain("postConversion",t),e.hooks.chain("postConversion",s),e}
var r=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,o=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,a=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i}();
